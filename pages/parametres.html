<!-- Page ParamÃ¨tres -->
<div class="page-header">
    <div class="breadcrumb">
        <a href="#" onclick="App.loadPage('dashboard')">Accueil</a>
        <span class="separator">/</span>
        <span>ParamÃ¨tres</span>
    </div>
    <h2>ParamÃ¨tres du SystÃ¨me</h2>
</div>

<div class="card">
    <div class="tabs">
        <button class="tab active" onclick="showParamTab('general')">GÃ©nÃ©ral</button>
        <button class="tab" onclick="showParamTab('categories')">CatÃ©gories</button>
        <button class="tab" onclick="showParamTab('workflow')">Workflow</button>
        <button class="tab" onclick="showParamTab('utilisateurs')">Utilisateurs</button>
        <button class="tab" onclick="showParamTab('droits')">Droits d'accÃ¨s</button>
    </div>
    
    <div id="general-tab" class="tab-content active">
        <h3>ParamÃ¨tres GÃ©nÃ©raux</h3>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; max-width: 800px;">
            <div class="form-group">
                <label>Taux TVA (%)</label>
                <input type="number" class="form-control" value="18">
            </div>
            <div class="form-group">
                <label>Seuil de marchÃ© (FCFA)</label>
                <input type="number" class="form-control" value="5000000">
            </div>
            <div class="form-group">
                <label>DÃ©lai de paiement (jours)</label>
                <input type="number" class="form-control" value="30">
            </div>
            <div class="form-group">
                <label>Exercice fiscal</label>
                <input type="number" class="form-control" value="2024">
            </div>
        </div>
        <button class="btn btn-primary mt-3">ğŸ’¾ Enregistrer</button>
    </div>
    
    <div id="categories-tab" class="tab-content">
        <h3>Gestion des CatÃ©gories</h3>
        <button class="btn btn-primary mb-3">â• Nouvelle CatÃ©gorie</button>
        <div class="tree-view">
            <div>ğŸ“ Fournitures</div>
            <div style="margin-left: 20px;">ğŸ“„ MatÃ©riel informatique</div>
            <div style="margin-left: 20px;">ğŸ“„ Fournitures de bureau</div>
            <div>ğŸ“ Services</div>
            <div style="margin-left: 20px;">ğŸ“„ Maintenance</div>
            <div style="margin-left: 20px;">ğŸ“„ Formation</div>
        </div>
    </div>
    
    <div id="workflow-tab" class="tab-content">
        <h3>Configuration du Workflow</h3>
        <table class="data-table">
            <thead>
                <tr>
                    <th>Montant Min</th>
                    <th>Montant Max</th>
                    <th>RÃ´le Validateur</th>
                    <th>Niveau</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>0</td>
                    <td>1,000,000</td>
                    <td>Gestionnaire</td>
                    <td>1</td>
                    <td><button class="btn btn-sm btn-secondary">Modifier</button></td>
                </tr>
                <tr>
                    <td>1,000,000</td>
                    <td>5,000,000</td>
                    <td>Chef Service</td>
                    <td>2</td>
                    <td><button class="btn btn-sm btn-secondary">Modifier</button></td>
                </tr>
            </tbody>
        </table>
    </div>
    
    <div id="utilisateurs-tab" class="tab-content">
        <h3>Gestion des Utilisateurs</h3>
        <button class="btn btn-primary mb-3">â• Nouvel Utilisateur</button>
        <table class="data-table">
            <thead>
                <tr>
                    <th>Nom</th>
                    <th>Email</th>
                    <th>RÃ´le</th>
                    <th>Service</th>
                    <th>Statut</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id="usersTableBody"></tbody>
        </table>
    </div>
    
    <div id="droits-tab" class="tab-content">
        <h3>Gestion des Droits d'AccÃ¨s</h3>
        <p>Configuration des permissions par rÃ´le</p>
    </div>
</div>

<script>
function showParamTab(tab) {
    document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
    document.getElementById(tab + '-tab').classList.add('active');
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    event.target.classList.add('active');
}

function loadUsersTable() {
    const users = db.tables.utilisateurs;
    const tbody = document.getElementById('usersTableBody');
    if (tbody) {
        tbody.innerHTML = users.map(u => `
            <tr>
                <td>${u.nom} ${u.prenom}</td>
                <td>${u.email}</td>
                <td>${u.role}</td>
                <td>${u.service}</td>
                <td><span class="badge badge-success">Actif</span></td>
                <td>
                    <button class="btn btn-sm btn-secondary">Modifier</button>
                </td>
            </tr>
        `).join('');
    }
}

loadUsersTable();
</script>